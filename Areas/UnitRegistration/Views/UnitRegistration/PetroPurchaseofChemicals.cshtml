@model CPDMSEF.ImportBlock
@{
    <link rel="icon" type="image/x-icon" href="./images/departmentlogo.png">
    ViewData["Title"] = "Block3";
    Layout = "~/Areas/UnitRegistration/Views/Shared/_UnitRegisLayout.cshtml";

}

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>

<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
    * {
        box-sizing: border-box
    }

    input[type=text],
    select,
    textarea {
        width: 100%;
        padding: 10px;
        border: 1px solid #ccc;
        border-radius: 4px;
        resize: vertical;
    }

    label {
        display: inline-block;
        marginLeft: -2rem;
    }

    input[type=submit] {
        background-color: #04AA6D;
        color: white;
        padding: 12px 20px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        float: right;
    }

        input[type=submit]:hover {
            background-color: #45a049;
        }

    .container {
        border-radius: 5px;
        background-color: #f2f2f2;
        padding: 20px;
    }

    .col-25 {
        float: left;
        width: 25%;
        margin-top: 6px;
        marginLeft: 1rem
    }

    .col-75 {
        float: left !important;
        width: 95% !important;
        margin-top: 6px !important;
    }

    .col-70 {
        float: left !important;
        width: 50% !important;
        margin-top: 6px !important;
    }

    /* Clear floats after the columns */
    .row:after {
        content: "";
        display: table;
        clear: both;
    }

    /* Responsive layout - when the screen is less than 600px wide, make the two columns stack on top of each other instead of next to each other */
    @@media screen and (max-width: 600px) {

        .col-75,
        .col-70 input[type=submit] {
            width: 100%;
            margin-top: 0;
        }

        .sell2 {
            margin-left: 0rem;
        }

        .sell4 {
            margin-left: 0rem;
        }
    }

    .sell3 {
        margin-left: -2rem;
    }

    .Cell{
        margin-left: -2rem;
    }

    input[type=text]:focus {
        border: 2px solid gray;
    }
</style>

<br />
<br />


<div class="authentication-box">
    <div class="">
        <div class="page-header">
            <div class="">
                <div class="row">
                    <div class="col-lg-6">
                        <div class="page-header-left">
                        </div>
                    </div>
                    <div class="col-lg-6">
                        <ol class="breadcrumb pull-right">
                            <li class="breadcrumb-item">
                                <a href="~/UnitRegistration/UnitRegistration/UnitOPTDashboard"><i data-feather="home"></i></a>
                            </li>
                            <li class="breadcrumb-item active">Entry</li>
                            <li class="breadcrumb-item active">Master Entry </li>
                            <li class="breadcrumb-item active">Purchase of Petro-Chemicals</li>
                        </ol>
                    </div>
                </div>
                <div class="row card lg:w-[67rem] lg:ml-[14rem] ">
                    <div class=" p-0 ">
                        <div class=" tab2-card">
                            <div class="card-body">
                                <ul class="nav nav-tabs nav-material" id="top-tab" role="tablist">
                                    <li class="nav-item"> <a class="nav-link" id="contact-top-tab" data-bs-toggle="tab" href="#top-contact" role="tab" aria-controls="top-contact" aria-selected="false"><span class="icon-unlock me-2"></span><b>Purchase of Petro-Chemicals</b></a> </li>
                                </ul>

                                <form actioin="ChemicalBlock3Entry" method="post">

                                    <div class="row mb-4">
                                        <div class="col-sm-6">
                                            <label>Source</label> <label class="RequiredField">*</label>

                                            <select class="form-select form-control Source" name="Source" aria-label="Default select example">
                                                <option selected>--Source--</option>
                                                <option value="1">Produced</option>
                                                <option value="2">International</option>
                                                <option value="3">Domestic</option>
                                            </select>

                                        </div>
                                        <div class="col-6">
                                            <div class="form-outline ">
                                                <label for="lname">
                                                    Product
                                                </label>
                                        <select name="Chemical_Product_Code" id="Chemical_Product_Code" class="form-control searchableselect">
                                            <option value="">-- Select Chemicals Product --</option>
                                                    @{
                                                        List<CPDMSEF.ChemicalProductGroup> lstChemicalProdModel = (List<CPDMSEF.ChemicalProductGroup>)ViewData["ChemicalProd"];
                                                        if (lstChemicalProdModel != null)
                                                        {
                                                            foreach (var item in lstChemicalProdModel)
                                                            {
                                                                if (item.Chemical_Product_Code == Model.Chemical_Product_Code)
                                                                {
                                                              <option selected="selected" value="@item.Chemical_Product_Code">@item.Chemical_Product_Name</option>
                                                                }
                                                                else
                                                                {
                                                                                    <option value="@item.Chemical_Product_Code">@item.Chemical_Product_Name</option>
                                                                }
                                                            }
                                                        }
                                                    }
                                        </select>

                                            </div>
                                        </div>

                                    </div>
                                    <div class="row mb-4">
                                        <div class="col">
                                            <div class="form-outline">
                                                <div class="row">
                                                    <label for="lname">
                                                       Import Quantity
                                                    </label>
                                                    <div class="col-75 d-flex">

                                                        <input type="text" id="ImportQuantityid" name="ImportQuantityid" placeholder=" Import Quantity">
                                                        <select id="ImportQuantityunitid" name="ImportQuantityunitid" class="ImportQuantityunitid" style="width: 31%">
                                                            <option value="">Select Unit</option>
                                                            <option value="Solid">Kg</option>
                                                            <option value="Liqued">MT</option>
                                                            <option value="Gas">MMBtu</option>
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col">
                                            <div class="form-outline">
                                                <div class="row">
                                                    <label for="lname">
                                                      Import Value(INR)
                                                    </label>
                                                    <div class="col-75 d-flex">

                                                        <input type="text" id="ImportValueID" name="ImportValueID" placeholder=" Import Value">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="table-responsive">
                                        <table id="Main_Constituents1" class="table table-bordered Main_Constituents">
                                            <thead>
                                                <tr>
                                                  
                                                    <th colspan="9" style="background: #329466; color: white; text-align: center;"">List main constituents of the substance/ mixture/article with 10% (w/w) or more concentration </th>

                                                </tr>
                                                <tr>
                                                    <th>#SL.No.</th>
                                                    <th>IUPAC Name</th>
                                                    <th>Common Name</th>
                                                    <th>CAS No.</th>
                                                    <th>HS Code</th>
                                                    <th>Molecular Structure</th>
                                                    <th>Isomer</th>

                                                    <th>Physical State</th>
                                                    <th>View Image</th>

                                                </tr>
                                            </thead>
                                            <tbody  id="Main_Constituents1body">

                                            </tbody>
                                        </table>
                                    </div>

                                    <div class="table-responsive">
                                        <table id="Main_Constituents" class="table table-bordered Main_Constituents">
                                            <thead>
                                                <tr>

                                                    <th colspan="11" style="background: #329466; color: white; text-align: center;">Classification and labelling information: (according to 9th revision of UN-GHS) </th>


                                                </tr>
                                                <tr>
                                                    <th>#SL.No</th>
                                                    <th>Hazard Classification</th>
                                                    <th>Resulting Hazard</th>
                                                    <th>Hazard Category</th>
                                                    <th>Hazard Sub Category</th>
                                                    <th>Specific Concentration Limits, where applicable</th>
                                                    <th>Main use category</th>
                                                    <th>Specification Industrial Professional</th>
                                                    <th>Route Exposure</th>
                                                    <th>Environmental Exposure</th>
                                                    <th>Pattern Exposure</th>

                                                </tr>
                                            </thead>
                                            <tbody  id="Main_Constituents2body">

                                            </tbody>
                                        </table>
                                    </div>


                                    <div class="form-group " style="display:none">


                                    </div>

                                    <div class="table-responsive" style="display:none">
                                        <table id="Main_Constituents" class="table table-bordered Main_Constituents">

                                            <tbody>

                                                <tr>
                                                    <th>#SL.No</th>
                                                    <th>CAS No. </th>
                                                    <th>Name of impurities</th>


                                                    <th>Nature of impurities including isomers and by-products</th>
                                                    <th>(%) Range of impurities</th>
                                                </tr>
                                                <tr>
                                                    <td>1</td>

                                                    <td><input type="text" name="CASNo" class="CASNo" /></td>
                                                    <td><input type="text" name="SolventName" class="SolventName" /></td>
                                                    <td><input type="text" name="impurities" class="impurities" /></td>

                                                    <td><input type="text" name="Natureofimpurities" class="Natureofimpurities" /></td>
                                                    <td><input type="text" id="Rangeofimpurities" name="Rangeofimpurities" class="Rangeofimpurities" /></td>


                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>

                                    <br />
                                    <button type="submit" class="btn btn-primary btn-block mb-4" style="width : 10rem;     margin-left: 27rem; background: #329466 !important;">Submit</button>

                                </form>

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
 <script>

        $('#Chemical_Code').change(function () {
            debugger;
            if ($('#Chemical_Code').val() != "") {
                $.ajax({
                    url: '/UnitRegistration/UnitRegistration/GetChemicalProductByID',
                    data: { 'Chemical_Code': $('#Chemical_Code').val() },
                    dataType: 'json',
                    type: 'post',
                    success: function (data) {
                        debugger;
                        var row = "";
                        $('#Chemical_Product_Code').html('');
                        row += "<option value=''>-- Select Chemicals Product --</option>";
                        $.each(data, function (ind, item) {
                            row += "<option value='" + item.chemical_Product_Code + "'>" + item.chemical_Product_Name + "</option>";
                        });
                        $('#Chemical_Product_Code').html(row);
                    },
                    error: function (err) {

                    }
                });
            }
            else {
                var District2 = "";
                $('#Chemical_Product_Code').html('');
                District2 += "<option value=''>-- Select Chemicals Product --</option>";
                $('#Chemical_Product_Code').html(District2);

            }
        });

        
        });

    </script>
     <script>


            function getdetails(prodcutid) {


                var url = '/UnitRegistration/UnitRegistration/Bindblock3inpportbind';
                //var data = JSON.stringify({ rowid: id });

                $.ajax({
                    url: url,
                    type: 'POST',

                    data: {
                        'productcode': prodcutid, 'mode':2

                    },
                    dataType: 'json',
                    success: function (response) {
                        // Bind the model data to the table
                        //  var yearlySubDetails = response[0].yearlySubDetails;
                        var tableBody = $('#Main_Constituents1body');
                        tableBody.empty();
                        var tableBody2 = $('#Main_Constituents2body');
                        tableBody2.empty();
                        // var yearlySubDetails2 = response[0].yearlySubDetails2;


                        $.each(response, function (index, detail) {
                            var row = $('<tr></tr>');
                            var row2 = $('<tr></tr>');

                            var srno = index + 1;
                            row.append($('<td></td>').text(srno));
                            row.append($('<td></td>').text(detail.c_IUPAC_Name));
                            row.append($('<td></td>').text(detail.c_Common_Name));
                            row.append($('<td></td>').text(detail.c_CAS_No));
                            row.append($('<td></td>').text(detail.hsCode));
                            row.append($('<td></td>').text(detail.c_Molecular_Structure));
                            row.append($('<td></td>').text(detail.c_Isomer));
                            row.append($('<td></td>').text(detail.physicalStateName));

                              row2.append($('<td></td>').text(srno));

                              row2.append($('<td></td>').text(detail.hazard_Classification_Name));
                              row2.append($('<td></td>').text(detail.resulting_Hazard_Name));
                           row2.append($('<td></td>').text(detail.hazardCategory));
                           row2.append($('<td></td>').text(detail.hazardSubCategory));
                              row2.append($('<td></td>').text(detail.specification_Industrial_Professional_Name));
                              row2.append($('<td></td>').text(detail.main_Use_Category_Name));

                              row2.append($('<td></td>').text(detail.significant_Route_Exposure_Name));
                              row2.append($('<td></td>').text(detail.environmental_Exposure_Name));
                              row2.append($('<td></td>').text(detail.pattern_Exposure_Name));





                            tableBody.append(row);
                             tableBody2.append(row2);

                        });



                    },
                    error: function (xhr, textStatus, errorThrown) {

                        console.log('API request failed:', errorThrown);
                    }
                });
            }


        </script>



        <script>

    jQuery(document).ready(function () {
        debugger;
        if (true) {
            $.ajax({
                url: '/UnitRegistration/UnitRegistration/GetChemicalPetroProduct',
                data: { 'Action': 27 },
                dataType: 'json',
                type: 'post',
                success: function (data) {
                    debugger;
                    var row = "";
                    $('#Chemical_Product_Code').html('');
                    row += "<option value=''>-- Select Petro-Chemicals Product --</option>";
                    $.each(data, function (ind, item) {
                        row += "<option value='" + item.pChemical_Product_Code + "'>" + item.pChemical_Product_Name + "</option>";
                    });
                    $('#Chemical_Product_Code').html(row);
                },
                error: function (err) {

                }
            });
        }
        else {
            var District2 = "";
            $('#Chemical_Product_Code').html('');
            District2 += "<option value=''>-- Select Petro-Chemicals Product --</option>";
            $('#Chemical_Product_Code').html(District2);

        }
    });

</script>

<script>
    $(document).ready(function () {

        $("#Chemical_Product_Code").change(function () {
            var selectedOption = $(this).val(); 

            getdetails(selectedOption);
        });
    });
</script>
